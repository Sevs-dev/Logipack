@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========= THEME TOKENS (LIGHT / DARK) ========= */
:root,
html {
  /* Base */
  --background: 248 250 252; /* slate-50 */
  --foreground: 15 23 42;    /* slate-900 */

  /* Surfaces */
  --surface: 255 255 255;       /* white */
  --surface-muted: 244 247 250; /* azul grisáceo suave */
  --card: 255 255 255;
  --popover: 255 255 255;

  /* Secundarios */
  --muted-foreground: 71 85 105; /* slate-600 */

  /* Borders / Inputs / Ring — MÁS CLAROS en light */
  --border: 179 171 168;   /* ~slate-100 */
  --input: 246 248 252;    /* casi slate-50 (borde muy claro pero visible) */
  --ring: 99 102 241;      /* indigo-500 */

  /* Accents */
  --accent: 79 70 229;         /* indigo-600 */
  --accent-hover: 67 56 202;   /* indigo-700 */
  --accent-foreground: 255 255 255;

  /* Feedback */
  --success: 5 150 105;            /* emerald-600 */
  --success-foreground: 236 253 245;
  --warning: 217 119 6;            /* amber-600 */
  --warning-foreground: 255 251 235;
  --danger: 220 38 38;             /* red-600 */
  --danger-foreground: 254 242 242;
  --info: 2 132 199;               /* sky-600 */
  --info-foreground: 240 249 255;

  /* Charts */
  --chart-1: 79 70 229;
  --chart-2: 2 132 199;
  --chart-3: 236 72 153;
  --chart-4: 22 163 74;
  --chart-5: 245 158 11;
  --chart-6: 220 38 38;

  /* Gradiente */
  --bg-from: 248 250 252;
  --bg-via: 239 246 255;
  --bg-to: 238 242 255;

  /* Sombra base */
  --shadow: 2 6 23;
}

:root[data-theme="dark"],
html[data-theme="dark"] {
  /* Base */
  --background: 3 7 18;  /* gray-950 */
  --foreground: 226 232 240; /* slate-200 */

  /* Surfaces */
  --surface: 15 23 42;       /* slate-900 */
  --surface-muted: 30 41 59; /* slate-800 */
  --card: 15 23 42;
  --popover: 15 23 42;

  /* Secundarios */
  --muted-foreground: 148 163 184; /* slate-400 */

  /* Borders / Inputs / Ring — MÁS LUMINOSOS en dark para que resalten */
  --border: 148 163 184; /* slate-400 */
  --input: 203 213 225;  /* slate-300 (más claro => más visible en fondo oscuro) */
  --ring: 165 180 252;   /* indigo-300 */

  /* Accents */
  --accent: 129 140 248;        /* indigo-400 */
  --accent-hover: 99 102 241;   /* indigo-500 */
  --accent-foreground: 15 23 42;

  /* Feedback */
  --success: 52 211 153;   /* emerald-400 */
  --success-foreground: 5 46 22;
  --warning: 251 191 36;   /* amber-400 */
  --warning-foreground: 69 26 3;
  --danger: 248 113 113;   /* red-400 */
  --danger-foreground: 69 10 10;
  --info: 56 189 248;      /* sky-400 */
  --info-foreground: 8 31 49;

  /* Charts */
  --chart-1: 129 140 248;
  --chart-2: 56 189 248;
  --chart-3: 244 114 182;
  --chart-4: 74 222 128;
  --chart-5: 251 191 36;
  --chart-6: 251 113 133;

  /* Gradiente */
  --bg-from: 2 6 23;
  --bg-via: 15 23 42;
  --bg-to: 3 7 18;

  /* Sombra */
  --shadow: 0 0 0;
}

/* ========= BASE: aplicar tokens a inputs ========= */
@layer base {
  /* Campos estándar (evita checkbox/radio) */
  input:not([type="checkbox"]):not([type="radio"]),
  select,
  textarea {
    background-color: rgb(var(--surface));
    color: rgb(var(--foreground));
    border-color: rgb(var(--input));
  }

  /* Placeholder legible */
  input::placeholder,
  textarea::placeholder {
    color: rgb(var(--muted-foreground) / 0.7);
  }

  /* Hover sutil */
  input:not([type="checkbox"]):not([type="radio"]):hover,
  select:hover,
  textarea:hover {
    border-color: rgb(var(--foreground) / 0.22);
  }

  /* Focus accesible */
  input:not([type="checkbox"]):not([type="radio"]):focus,
  select:focus,
  textarea:focus,
  input:not([type="checkbox"]):not([type="radio"]):focus-visible,
  select:focus-visible,
  textarea:focus-visible {
    outline: none;
    border-color: rgb(var(--ring));
    box-shadow: 0 0 0 2px rgb(var(--ring) / 0.35);
  }

  /* Disabled consistente */
  input:disabled,
  select:disabled,
  textarea:disabled {
    border-color: rgb(var(--border));
    color: rgb(var(--foreground) / 0.6);
    background-color: rgb(var(--surface-muted));
    cursor: not-allowed;
  }
}

/* ========= HOTFIX opcional: ganar a utilities como border-gray-300 ========= */
@layer utilities {
  .use-token-borders :is(
    input:not([type="checkbox"]):not([type="radio"]),
    select,
    textarea
  ) {
    border-color: rgb(var(--input)) !important;
    background-color: rgb(var(--surface)) !important;
    color: rgb(var(--foreground)) !important;
  }
  .use-token-borders
    :is(input:not([type="checkbox"]):not([type="radio"]), select, textarea):hover {
    border-color: rgb(var(--foreground) / 0.22) !important;
  }
  .use-token-borders
    :is(input:not([type="checkbox"]):not([type="radio"]), select, textarea):focus {
    outline: none !important;
    border-color: rgb(var(--ring)) !important;
    box-shadow: 0 0 0 2px rgb(var(--ring) / 0.35) !important;
  }
}

/* ========= Helpers visuales ========= */
.app-bg {
  background-image: linear-gradient(
    to bottom right,
    rgb(var(--bg-from)),
    rgb(var(--bg-via)),
    rgb(var(--bg-to))
  );
}

/* Transiciones temáticas suaves (global) */
*,
*::before,
*::after {
  transition: background-color 0.2s ease, color 0.2s ease,
    border-color 0.2s ease;
}

/* Animación de entrada */
@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.6s ease-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.98); }
    to   { opacity: 1; transform: scale(1); }
  }
}
